<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ø±Ù‘Ø§Ø¨ â€” 777</title>
<style>
  :root{
    --bg:#050505;
    --panel:#071012;
    --accent:#00f0c0; /* Ø£Ø®Ø¶Ø± Ø²Ù…Ø±Ø¯ÙŠ */
    --gold:#e7c95a;
    --muted:#9aa7a6;
    font-family: "Cairo", "Noto Kufi Arabic", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#000 0%, #051010 60%);color:var(--accent);-webkit-font-smoothing:antialiased;}
  .wrap{max-width:980px;margin:40px auto;padding:20px;}
  header{text-align:center;padding:30px 20px;}
  h1{font-size:40px;color:var(--gold);text-shadow:0 6px 28px rgba(0,0,0,.6);margin:0 0 12px;}
  .sub{color:var(--muted);margin-bottom:22px;font-size:16px;}
  nav{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-bottom:28px;}
  .btn{
    background:transparent;border:2px solid rgba(0,240,192,0.12);
    color:var(--accent);padding:12px 18px;border-radius:12px;
    cursor:pointer;font-size:16px;min-width:140px;backdrop-filter: blur(6px);
    transition:all .18s ease;
  }
  .btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(0,0,0,.6);border-color:var(--accent);}
  .btn.primary{background:linear-gradient(90deg,#00f0c0 0%, #00d4b0 100%);color:#001;border:font-weight:700;}
  #content{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.2));padding:22px;border-radius:14px;min-height:360px;color:#cfeee3;box-shadow:0 10px 40px rgba(0,0,0,.6);}
  .notice{border:2px dashed rgba(0,240,192,0.12);padding:18px;border-radius:12px;color:var(--muted);margin-top:20px;text-align:center}
  footer{margin-top:28px;text-align:center;color:var(--muted);font-size:13px}
  .menu-hidden{display:none}
  @media (max-width:520px){h1{font-size:28px}.btn{min-width:120px;padding:10px 12px}}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ø±Ù‘Ø§Ø¨ Ø§Ù„ÙØ±Ø¹ÙˆÙ†ÙŠØ© ğŸ‘‘</h1>
    <div class="sub">Ø§Ø®ØªØ± ØµÙØ­Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§ Ù‡Ù†Ø§ â€” Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©. (Ø§Ù„Ù…Ù„ÙØ§Øª ØªÙÙØ­Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§)</div>
  </header>

  <nav id="nav"></nav>

  <div id="content" aria-live="polite">
    <h2 style="color:var(--gold);margin-top:0">Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ù…ØªØµÙ„ â€” Ø¬Ù„Ø³Ø© Ø§Ù„Ø¹Ø±Ù‘Ø§Ø¨ Ø¨Ø¯Ø£Øª.</h2>
    <p>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ØªØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠÙ‹Ø§. Ø§Ø¶ØºØ· Ø£Ø­Ø¯ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„Ø¥Ø·Ø§Ø±.</p>
    <div class="notice" id="emptyNotice">Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù…Ø¬Ù„Ø¯... ÙŠØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.</div>
  </div>

  <div style="display:flex;gap:12px;justify-content:center;margin-top:18px">
    <button id="ttsToggle" class="btn">ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª ğŸ”Š</button>
    <button id="reloadList" class="btn">ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØµÙØ­Ø§Øª â†»</button>
  </div>

  <footer>Arab Network â€” 777 Â· WhatsApp: +201002446123</footer>
</div>

<script>
/*
  index.html â€” Sarai-style loader
  Strategy:
  - Try a short list of expected filenames (safe approach).
  - For each candidate, use fetch() to test if it exists (GET) â€” if 200 OK, add to menu.
  - When user clicks, fetch the file and inject its <main> or body content into #content.
  - No history pushState, no file name dump in UI (we show friendly labels).
  - TTS reader for #content text.
*/

const candidates = [
  {file:'home.html', label:'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'},
  {file:'index.html', label:'Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'},
  {file:'about.html', label:'Ø­ÙˆÙ„'},
  {file:'gallery.html', label:'Ø§Ù„Ù…Ø¹Ø±Ø¶'},
  {file:'gallery-index.html', label:'Ø§Ù„Ù…Ø¹Ø±Ø¶'},
  {file:'voice.html', label:'Ø§Ù„ØµÙˆØª'},
  {file:'contact.html', label:'ØªÙˆØ§ØµÙ„'},
  {file:'sky-gate.html', label:'Ø¨ÙˆØ§Ø¨Ø©'},
  {file:'zero.html', label:'Zero'},
  {file:'dendera-court.html', label:'Dendera'},
  // add more friendly mappings if you plan to add files later
];

const nav = document.getElementById('nav');
const content = document.getElementById('content');
const emptyNotice = document.getElementById('emptyNotice');
let ttsEnabled = false;
let synth = window.speechSynthesis;

function safeTextFromHTML(html){
  // strip tags, keep basic whitespace
  const tmp = document.createElement('div');
  tmp.innerHTML = html;
  return tmp.innerText || tmp.textContent || '';
}

async function exists(url){
  try{
    // try HEAD first for speed (some hosts disallow HEAD â€” fallback to GET)
    let res = await fetch(url, {method:'HEAD'});
    if(res.ok) return true;
    // fallback GET (but don't download huge assets)
    res = await fetch(url, {method:'GET'});
    return res.ok;
  }catch(e){
    return false;
  }
}

async function buildMenu(){
  nav.innerHTML = '';
  emptyNotice.innerText = 'Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù…Ø¬Ù„Ø¯... ÙŠØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.';
  let found = [];
  // test candidates in parallel but throttle small batch
  const checks = candidates.map(c => exists(c.file).then(ok=> ok? c : null).catch(()=>null));
  const results = await Promise.all(checks);
  for(const r of results){
    if(r) found.push(r);
  }
  // remove duplicates (if index.html & home.html both present show single "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©")
  const dedup = [];
  const labels = new Set();
  for(const f of found){
    if(!labels.has(f.label)){
      labels.add(f.label);
      dedup.push(f);
    }
  }

  if(!dedup.length){
    emptyNotice.innerText = 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙØ­Ø§Øª Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯.';
    return;
  } else {
    emptyNotice.style.display = 'none';
  }

  dedup.forEach(item=>{
    const btn = document.createElement('button');
    btn.className = 'btn';
    btn.innerText = item.label;
    btn.addEventListener('click', ()=> loadPage(item.file,item.label));
    nav.appendChild(btn);
  });

  // also add a "show raw index" hidden button if you want self-debug (not visible)
  const debug = document.createElement('button');
  debug.className='btn menu-hidden';
  debug.id='debugIndex';
  nav.appendChild(debug);
}

// load page and inject
async function loadPage(file,label){
  try{
    content.innerHTML = `<p style="color:var(--muted)">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ "${label}" â€¦</p>`;
    const res = await fetch(file);
    if(!res.ok) throw new Error('file not found');
    const html = await res.text();
    // try to extract only <main> or <article> or body inner
    const tmp = document.createElement('div');
    tmp.innerHTML = html;
    let fragment = '';
    const main = tmp.querySelector('main');
    const article = tmp.querySelector('article');
    if(main) fragment = main.innerHTML;
    else if(article) fragment = article.innerHTML;
    else {
      // remove common head elements if present and take body innerHTML
      const body = tmp.querySelector('body');
      fragment = body ? body.innerHTML : tmp.innerHTML;
    }
    // optional: sanitize minimal scripts removal
    fragment = fragment.replace(/<script[\s\S]*?<\/script>/gi, '');
    // update content
    content.innerHTML = '<div style="opacity:.96">'+fragment+'</div>';
    // scroll to top of content
    content.scrollIntoView({behavior:'smooth'});
    // if tts is on, speak
    if(ttsEnabled){
      const txt = safeTextFromHTML(content.innerHTML);
      speakText(txt);
    }
  }catch(err){
    content.innerHTML = `<div class="notice" style="color:var(--muted)">ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© "${label}".<br>ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ø§Ù„Ø¬Ø°Ø±: <strong>${file}</strong></div>`;
  }
}

/* TTS functions */
function speakText(text){
  if(!text || !window.speechSynthesis) return;
  // cancel previous
  synth.cancel();
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'ar-SA';
  utter.rate = 0.98;
  utter.pitch = 1.0;
  utter.volume = 1.0;
  synth.speak(utter);
}

/* Buttons */
document.getElementById('ttsToggle').addEventListener('click', ()=>{
  ttsEnabled = !ttsEnabled;
  document.getElementById('ttsToggle').innerText = ttsEnabled ? 'Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª ğŸ”•' : 'ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ğŸ”Š';
  if(ttsEnabled){
    // read initial content
    const txt = safeTextFromHTML(content.innerHTML);
    speakText(txt);
  } else {
    synth.cancel();
  }
});
document.getElementById('reloadList').addEventListener('click', async ()=>{
  emptyNotice.style.display = 'block';
  emptyNotice.innerText = 'Ø¥Ø¹Ø§Ø¯Ø© ÙØ­Øµ Ø§Ù„Ù…Ø¬Ù„Ø¯...';
  await buildMenu();
});

// initial build on load
window.addEventListener('load', async ()=>{
  await buildMenu();
  // try to load index.html or home.html automatically if present (but not forced)
  const prefer = ['index.html','home.html','home','index'];
  for(const p of prefer){
    const c = candidates.find(it=> it.file === p);
    if(c){
      // only load if exists
      const ok = await exists(c.file);
      if(ok){
        loadPage(c.file,c.label);
        return;
      }
    }
  }
  // else nothing auto-loaded
});
</script>
</body>
</html>
